<div class="container-gap">

  <% unless @log.watered? %>
    <div class="nes-container is-rounded is-error">
      <p>ğŸ’§ Tu nâ€™as pas encore arrosÃ© ta plante aujourdâ€™huiâ€¦ elle te regarde bizarrement.</p>
      <div class="mt-2">
        <%= button_to "ğŸ’¦ Arroser maintenant", water_plant_path, method: :post, class: "nes-btn is-primary" %>
      </div>
    </div>
  <% end %>

  <!-- ğŸ¯ QuÃªte du jour -->
  <div class="nes-container is-dark with-title is-rounded">
    <p class="title">ğŸ¯ QuÃªte du jour</p>
    <p><strong><%= @quest.title %></strong></p>
    <p><%= @quest.description %></p>

    <% if @log.quest_done? %>
      <p class="mt-2">âœ… QuÃªte dÃ©jÃ  complÃ©tÃ©e</p>
      <% if @log.quest_response.present? %>
        <p class="nes-balloon from-left mt-2">Ta rÃ©ponse : <%= @log.quest_response %></p>
      <% end %>
    <% elsif @quest.quest_type == "text_input" %>
      <%= form_with url: submit_quest_response_path, method: :post, class: "mt-3" do |form| %>
        <div class="nes-field">
          <label for="quest_response">Ta rÃ©ponse :</label>
          <%= form.text_area :quest_response, class: "nes-textarea", rows: 3 %>
        </div>
        <div class="mt-2">
          <%= form.submit "Envoyer", class: "nes-btn is-success" %>
        </div>
      <% end %>
    <% else %>
      <%= button_to "Faire la quÃªte", quest_plant_path, method: :post, class: "nes-btn is-warning mt-2" %>
    <% end %>
  </div>

  <!-- ğŸŒ¿ Ã‰tat de la plante -->
  <div class="nes-container with-title is-rounded">
    <p class="title">ğŸŒ¿ Ã‰tat de ta plante</p>

    <!-- ğŸ—£ï¸ Message dâ€™humeur -->
    <p class="nes-balloon from-left mb-3"><%= @plant.mood_phrase %></p>

    <!-- ğŸŒ± Stade visuel -->
    <div class="text-center text-4xl my-3">
      <%= case @plant.growth_stage
        when "sprout" then "ğŸŒ±"
        when "leafy" then "ğŸŒ¿"
        when "bushy" then "ğŸŒ´"
        when "tree" then "ğŸŒ³"
        else "ğŸª´"
      end %>
    </div>

    <!-- ğŸ“ Message de stade -->
    <p class="text-sm text-center">
      <%= case @plant.growth_stage
        when "sprout" then "Je viens de naÃ®tre... ne m'oublie pas !"
        when "leafy" then "Regarde comme je deviens feuillu ğŸŒ¿"
        when "bushy" then "Je suis touffue et fiÃ¨re ğŸ˜"
        when "tree" then "Je suis devenue un arbre majestueux. Arrose-moi comme une reine ğŸ‘‘"
        else "Ã‰tat inconnuâ€¦ ai-je Ã©tÃ© clonÃ©e ? ğŸ¤–"
      end %>
    </p>
  </div>

  <!-- ğŸ”— Lien vers succÃ¨s -->
  <div class="text-center">
    <%= link_to "ğŸ† Voir mes succÃ¨s", achievements_path, class: "nes-btn is-primary" %>
  </div>

</div>

