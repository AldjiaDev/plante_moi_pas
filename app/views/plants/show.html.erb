<div class="container-gap">

  <% unless @log.watered? %>
    <div class="nes-container is-rounded is-error">
      <p>💧 Tu n’as pas encore arrosé ta plante aujourd’hui… elle te regarde bizarrement.</p>
      <div class="mt-2">
        <%= button_to "💦 Arroser maintenant", water_plant_path, method: :post, class: "nes-btn is-primary" %>
      </div>
    </div>
  <% end %>

  <!-- 🎯 Quête du jour -->
  <div class="nes-container is-dark with-title is-rounded">
    <p class="title">🎯 Quête du jour</p>
    <p><strong><%= @quest.title %></strong></p>
    <p><%= @quest.description %></p>

    <% if @log.quest_done? %>
      <p class="mt-2">✅ Quête déjà complétée</p>
      <% if @log.quest_response.present? %>
        <p class="nes-balloon from-left mt-2">Ta réponse : <%= @log.quest_response %></p>
      <% end %>
    <% elsif @quest.quest_type == "text_input" %>
      <%= form_with url: submit_quest_response_path, method: :post, class: "mt-3" do |form| %>
        <div class="nes-field">
          <label for="quest_response">Ta réponse :</label>
          <%= form.text_area :quest_response, class: "nes-textarea", rows: 3 %>
        </div>
        <div class="mt-2">
          <%= form.submit "Envoyer", class: "nes-btn is-success" %>
        </div>
      <% end %>
    <% else %>
      <%= button_to "Faire la quête", quest_plant_path, method: :post, class: "nes-btn is-warning mt-2" %>
    <% end %>
  </div>

  <!-- 🌿 État de la plante -->
  <div class="nes-container with-title is-rounded">
    <p class="title">🌿 État de ta plante</p>

    <!-- 🗣️ Message d’humeur -->
    <p class="nes-balloon from-left mb-3"><%= @plant.mood_phrase %></p>

    <!-- 🌱 Stade visuel -->
    <div class="text-center text-4xl my-3">
      <%= case @plant.growth_stage
        when "sprout" then "🌱"
        when "leafy" then "🌿"
        when "bushy" then "🌴"
        when "tree" then "🌳"
        else "🪴"
      end %>
    </div>

    <!-- 📝 Message de stade -->
    <p class="text-sm text-center">
      <%= case @plant.growth_stage
        when "sprout" then "Je viens de naître... ne m'oublie pas !"
        when "leafy" then "Regarde comme je deviens feuillu 🌿"
        when "bushy" then "Je suis touffue et fière 😎"
        when "tree" then "Je suis devenue un arbre majestueux. Arrose-moi comme une reine 👑"
        else "État inconnu… ai-je été clonée ? 🤖"
      end %>
    </p>
  </div>

  <!-- 🔗 Lien vers succès -->
  <div class="text-center">
    <%= link_to "🏆 Voir mes succès", achievements_path, class: "nes-btn is-primary" %>
  </div>

</div>

